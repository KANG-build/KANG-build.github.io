<nav class="navbar navbar-default navbar-static-top">
    <div class="container">
        <div class="navbar-header" style="height:50pt">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <!-- <a class="navbar-brand" href="/" style="font-size: large;"><span class="glyphicon glyphicon-home" aria-hidden="true"></span> SRC Lab. </a> -->
            <a class="navbar-brand" href="{{ '/' | relative_url }}" style="font-size: larger;"><img src="{{ '/image/src/logo_width_small.png' | relative_url }}" width="100%"> </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse" style="font-size:larger;">
            <ul class="nav navbar-nav pull-right">
                <!-- <li><a href="/page/faculty.html"><span class="glyphicon glyphicon-education" aria-hidden="true"></span> Faculty </a></li> -->
                <li><a href="{{ '/pages/people.html' | relative_url }}"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> Member </a></li>
                <li><a href="{{ '/pages/research.html' | relative_url }}"><span class="glyphicon glyphicon-apple" aria-hidden="true"></span> Research </a></li>
                <li><a href="{{ '/pages/publication.html' | relative_url }}"><span class="glyphicon glyphicon-book" aria-hidden="true"></span> Publication </a></li>    
                <li><a href="{{ '/pages/blog.html' | relative_url }}"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span> Blog </a></li>
                <li><a href="{{ '/pages/photo.html' | relative_url }}"><span class="glyphicon glyphicon-camera" aria-hidden="true"></span> Photo </a></li> 
                <li><a href="{{ '/pages/joinus.html' | relative_url }}"><span class="glyphicon glyphicon-hand-right" aria-hidden="true"></span> Join Us </a></li> 
                <!-- Auth: Login/Logout -->
                <li id="nav-auth-login"><a href="{{ '/pages/login.html' | relative_url }}" class="nav-auth-btn"><span class="glyphicon glyphicon-log-in" aria-hidden="true"></span> Login </a></li>
                <li id="nav-auth-user" style="display:none;" class="dropdown">
                    <a href="#" class="dropdown-toggle nav-auth-user-btn" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                        <img id="nav-auth-photo" src="{{ '/image/people/empty.png' | relative_url }}" class="nav-auth-avatar img-circle" alt="">
                        <span id="nav-auth-name"></span>
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="{{ '/pages/mypage.html' | relative_url }}"><span class="glyphicon glyphicon-cog"></span> 마이페이지</a></li>
                        <li class="divider"></li>
                        <li><a href="#" onclick="navLogout(); return false;"><span class="glyphicon glyphicon-log-out"></span> 로그아웃</a></li>
                    </ul>
                </li>
                <!-- <li><a href="/page/lecture.html"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Lecture </a></li> -->
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>
<script>
(function() {
    var origin = window.location.origin;
    fetch(origin + '/api/auth/me', { credentials: 'same-origin' })
    .then(function(r) { return r.json(); })
    .then(function(data) {
        if (data.logged_in && data.user) {
            document.getElementById('nav-auth-login').style.display = 'none';
            document.getElementById('nav-auth-user').style.display = '';
            document.getElementById('nav-auth-name').textContent = data.user.name;
            if (data.user.photo) {
                document.getElementById('nav-auth-photo').src = data.user.photo;
            }
        }
    }).catch(function() {});
})();
function navLogout() {
    fetch(window.location.origin + '/api/auth/logout', { method: 'POST', credentials: 'same-origin' })
    .then(function() { window.location.reload(); })
    .catch(function() { window.location.reload(); });
}
</script>
